â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    PROJECT STRUCTURE OVERVIEW                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ Root Directory
â”œâ”€â”€ ğŸ“„ docker-compose.yml          # Orchestrates all 4 services
â”œâ”€â”€ ğŸ“„ .gitignore                  # Git exclusions
â”œâ”€â”€ ğŸ“„ README.md                   # Complete documentation
â”œâ”€â”€ ğŸ“„ QUICK_START.md              # Quick reference guide
â”œâ”€â”€ ğŸ“„ SETUP_SUMMARY.md            # Setup overview
â”œâ”€â”€ ğŸ“„ EXAMPLES.md                 # API examples & queries
â””â”€â”€ ğŸ§ª tmp_rovodev_*.sh            # Test scripts

ğŸ“ federation-gateway/              âš¡ Apollo Federation Supergraph
â”œâ”€â”€ ğŸ“„ Dockerfile                  # Multi-stage Docker build
â”œâ”€â”€ ğŸ“„ package.json                # Dependencies (@apollo/gateway)
â”œâ”€â”€ ğŸ“„ tsconfig.json               # TypeScript config
â”œâ”€â”€ ğŸ“„ nest-cli.json               # NestJS CLI config
â”œâ”€â”€ ğŸ“„ .dockerignore               # Docker build exclusions
â”œâ”€â”€ ğŸ“„ .env                        # Environment variables
â””â”€â”€ ğŸ“ src/
    â”œâ”€â”€ ğŸ“„ main.ts                 # Application entry point
    â”œâ”€â”€ ğŸ“„ app.module.ts           # Main module with Federation config
    â”œâ”€â”€ ğŸ“ config/                 # Configuration service
    â”œâ”€â”€ ğŸ“ auth/                   # JWT authentication
    â”œâ”€â”€ ğŸ“ health/                 # Health check endpoint
    â””â”€â”€ ğŸ“ proxy/                  # REST API proxy controllers
        â”œâ”€â”€ auth-proxy.controller.ts
        â”œâ”€â”€ media-proxy.controller.ts
        â”œâ”€â”€ orders-proxy.controller.ts  â­ NEW
        â”œâ”€â”€ proxy.service.ts
        â””â”€â”€ proxy.module.ts

ğŸ“ users-service/                   ğŸ”· GraphQL Subgraph (Port 3001)
â”œâ”€â”€ ğŸ“„ Dockerfile                  # Service-specific Docker build
â”œâ”€â”€ ğŸ“„ package.json                # Dependencies (@apollo/subgraph)
â”œâ”€â”€ ğŸ“„ tsconfig.json               # TypeScript config
â”œâ”€â”€ ğŸ“„ nest-cli.json               # NestJS CLI config
â”œâ”€â”€ ğŸ“„ .dockerignore               # Docker build exclusions
â”œâ”€â”€ ğŸ“„ .env                        # Environment variables
â””â”€â”€ ğŸ“ src/
    â”œâ”€â”€ ğŸ“„ main.ts                 # Service entry point
    â”œâ”€â”€ ğŸ“„ app.module.ts           # ApolloFederationDriver config
    â”œâ”€â”€ ğŸ“ users/
    â”‚   â”œâ”€â”€ user.entity.ts         # @Directive('@key(fields: "id")')
    â”‚   â”œâ”€â”€ users.resolver.ts      # @ResolveReference
    â”‚   â”œâ”€â”€ users.service.ts       # Business logic
    â”‚   â””â”€â”€ users.module.ts
    â””â”€â”€ ğŸ“ health/
        â”œâ”€â”€ health.controller.ts
        â””â”€â”€ health.module.ts

ğŸ“ products-service/                ğŸ”¶ GraphQL Subgraph (Port 3002)
â”œâ”€â”€ ğŸ“„ Dockerfile                  # Service-specific Docker build
â”œâ”€â”€ ğŸ“„ package.json                # Dependencies (@apollo/subgraph)
â”œâ”€â”€ ğŸ“„ tsconfig.json               # TypeScript config
â”œâ”€â”€ ğŸ“„ nest-cli.json               # NestJS CLI config
â”œâ”€â”€ ğŸ“„ .dockerignore               # Docker build exclusions
â”œâ”€â”€ ğŸ“„ .env                        # Environment variables
â””â”€â”€ ğŸ“ src/
    â”œâ”€â”€ ğŸ“„ main.ts                 # Service entry point
    â”œâ”€â”€ ğŸ“„ app.module.ts           # ApolloFederationDriver config
    â”œâ”€â”€ ğŸ“ products/
    â”‚   â”œâ”€â”€ product.entity.ts      # @Directive('@key(fields: "id")')
    â”‚   â”œâ”€â”€ products.resolver.ts   # @ResolveReference
    â”‚   â”œâ”€â”€ products.service.ts    # Business logic
    â”‚   â””â”€â”€ products.module.ts
    â””â”€â”€ ğŸ“ health/
        â”œâ”€â”€ health.controller.ts
        â””â”€â”€ health.module.ts

ğŸ“ orders-service/                  ğŸŸ¢ REST API Service (Port 3003)
â”œâ”€â”€ ğŸ“„ Dockerfile                  # Service-specific Docker build
â”œâ”€â”€ ğŸ“„ package.json                # NestJS dependencies
â”œâ”€â”€ ğŸ“„ tsconfig.json               # TypeScript config
â”œâ”€â”€ ğŸ“„ nest-cli.json               # NestJS CLI config
â”œâ”€â”€ ğŸ“„ .dockerignore               # Docker build exclusions
â”œâ”€â”€ ğŸ“„ .env                        # Environment variables
â””â”€â”€ ğŸ“ src/
    â”œâ”€â”€ ğŸ“„ main.ts                 # Service entry point
    â”œâ”€â”€ ğŸ“„ app.module.ts           # Main module config
    â”œâ”€â”€ ğŸ“ orders/
    â”‚   â”œâ”€â”€ order.entity.ts        # Order entity & enums
    â”‚   â”œâ”€â”€ orders.controller.ts   # REST controller (GET/POST/PUT/DELETE)
    â”‚   â”œâ”€â”€ orders.service.ts      # Business logic
    â”‚   â”œâ”€â”€ orders.module.ts
    â”‚   â””â”€â”€ ğŸ“ dto/
    â”‚       â”œâ”€â”€ create-order.dto.ts
    â”‚       â””â”€â”€ update-order.dto.ts
    â””â”€â”€ ğŸ“ health/
        â”œâ”€â”€ health.controller.ts
        â””â”€â”€ health.module.ts

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        KEY CHARACTERISTICS                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Each service has:
   â€¢ Separate folder with complete codebase
   â€¢ Independent Dockerfile (multi-stage build)
   â€¢ Own package.json with dependencies
   â€¢ TypeScript configuration
   â€¢ Health check endpoint
   â€¢ Development & production builds

âœ… Federation Gateway:
   â€¢ Uses @apollo/gateway
   â€¢ IntrospectAndCompose for subgraph discovery
   â€¢ Proxies REST API requests
   â€¢ Unified GraphQL endpoint at :4000

âœ… GraphQL Subgraphs (Users & Products):
   â€¢ Use @apollo/subgraph
   â€¢ ApolloFederationDriver
   â€¢ @key directive for entity resolution
   â€¢ @ResolveReference for cross-service queries

âœ… REST API (Orders):
   â€¢ NestJS REST controllers
   â€¢ DTO validation with class-validator
   â€¢ Full CRUD operations
   â€¢ Accessible via Gateway proxy

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          PORT MAPPING                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Service              | Port  | Type              | Access
---------------------|-------|-------------------|---------------------------
Federation Gateway   | 4000  | GraphQL Gateway   | http://localhost:4000/graphql
Users Service        | 3001  | GraphQL Subgraph  | http://localhost:3001/graphql
Products Service     | 3002  | GraphQL Subgraph  | http://localhost:3002/graphql
Orders Service       | 3003  | REST API          | http://localhost:3003/orders

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     TECHNOLOGY STACK                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â€¢ Framework:          NestJS (TypeScript)
â€¢ GraphQL:            Apollo Federation v2
â€¢ Federation:         @apollo/gateway + @apollo/subgraph
â€¢ Container:          Docker + Docker Compose
â€¢ Runtime:            Node.js 20 Alpine
â€¢ Validation:         class-validator + class-transformer
â€¢ HTTP Client:        @nestjs/axios

